# Example multi-account configuration for CI/CD BOM generation
# This file demonstrates various authentication methods for different environments

version: "1.0"
encrypted: false

accounts:
  # Production account using IAM role assumption
  - account_id: "123456789012"
    account_name: "Production Account"
    role_arn: "arn:aws:iam::123456789012:role/InvenTagCrossAccountRole"
    external_id: "unique-external-id-for-security"
    regions:
      - "us-east-1"
      - "us-west-2"
      - "eu-west-1"
    services:
      - "EC2"
      - "S3"
      - "RDS"
      - "Lambda"
      - "ECS"
      - "EKS"
    tags:
      Environment: "production"
      Owner: "devops-team"
      CostCenter: "engineering"
      Project: "infrastructure"
    
  # Staging account using AWS profile
  - account_id: "123456789013"
    account_name: "Staging Account"
    profile_name: "inventag-staging"
    regions:
      - "us-east-1"
    services:
      - "EC2"
      - "S3"
      - "Lambda"
    tags:
      Environment: "staging"
      Owner: "devops-team"
    
  # Development account using direct credentials (for CI/CD environments)
  - account_id: "123456789014"
    account_name: "Development Account"
    # Note: In CI/CD, access_key_id and secret_access_key would be provided via environment variables
    # AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY
    regions:
      - "us-east-1"
    services:
      - "EC2"
      - "S3"
    tags:
      Environment: "development"

# Global configuration
global_config:
  # Default regions to scan if not specified per account
  default_regions:
    - "us-east-1"
    - "us-west-2"
  
  # Default services to discover if not specified per account
  default_services:
    - "EC2"
    - "S3"
    - "RDS"
    - "Lambda"
    - "ECS"
    - "VPC"
    - "IAM"
  
  # Default tags to check for compliance
  default_tags:
    - "Environment"
    - "Owner"
  
  # Parallel processing configuration
  max_concurrent_accounts: 3
  max_concurrent_regions: 2
  
  # Error handling
  continue_on_error: true
  retry_attempts: 3
  retry_delay_seconds: 5

# Metadata for tracking and documentation
metadata:
  created_by: "DevOps Team"
  created_date: "2024-01-15"
  description: "Multi-account configuration for automated BOM generation"
  environment: "production"
  version: "1.0"