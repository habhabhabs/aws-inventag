{
  "version": "1.0",
  "encrypted": false,
  "accounts": [
    {
      "account_id": "123456789012",
      "account_name": "Production Account",
      "regions": ["us-east-1", "us-west-2", "eu-west-1"],
      "services": ["EC2", "S3", "RDS", "Lambda", "ECS", "EKS"],
      "tags": {
        "Environment": "production",
        "Owner": "platform-team",
        "CostCenter": "engineering"
      }
    },
    {
      "account_id": "987654321098",
      "account_name": "My Custom Staging Environment",
      "regions": ["us-east-1", "us-west-2"],
      "services": ["EC2", "S3", "RDS", "Lambda"],
      "tags": {
        "Environment": "staging",
        "Owner": "platform-team"
      }
    },
    {
      "account_id": "555666777888",
      "account_name": "Development-Test-Account",
      "regions": ["us-east-1"],
      "services": ["EC2", "S3", "Lambda"],
      "tags": {
        "Environment": "development",
        "Owner": "dev-team"
      }
    },
    {
      "account_id": "111222333444",
      "account_name": "Security Audit Account",
      "regions": ["us-east-1", "us-west-2"],
      "services": ["IAM", "CloudTrail", "Config", "GuardDuty"],
      "tags": {
        "Environment": "security",
        "Owner": "security-team"
      }
    }
  ],
  "global_config": {
    "default_regions": ["us-east-1", "us-west-2"],
    "default_services": ["EC2", "S3", "RDS", "Lambda"],
    "max_concurrent_accounts": 4,
    "continue_on_error": true,
    "retry_attempts": 3
  },
  "metadata": {
    "created_by": "DevOps Team",
    "created_date": "2024-01-15",
    "description": "Flexible credential management example - works with any account IDs and names",
    "environment": "flexible",
    "credential_management": {
      "description": "This configuration demonstrates flexible credential management that works with any account IDs and names",
      "automatic_detection": {
        "github_actions": {
          "description": "Automatically tries multiple environment variable patterns",
          "patterns": [
            "AWS_ACCESS_KEY_ID_{account_id}",
            "AWS_ACCESS_KEY_ID_{ACCOUNT_NAME_SANITIZED}",
            "{ACCOUNT_NAME_SANITIZED}_AWS_ACCESS_KEY_ID",
            "AWS_ACCESS_KEY_ID_{last_4_digits_of_account_id}"
          ],
          "examples": {
            "account_123456789012": [
              "AWS_ACCESS_KEY_ID_123456789012",
              "AWS_ACCESS_KEY_ID_PRODUCTION_ACCOUNT",
              "PRODUCTION_ACCOUNT_AWS_ACCESS_KEY_ID",
              "AWS_ACCESS_KEY_ID_9012"
            ],
            "account_987654321098": [
              "AWS_ACCESS_KEY_ID_987654321098",
              "AWS_ACCESS_KEY_ID_MY_CUSTOM_STAGING_ENVIRONMENT",
              "MY_CUSTOM_STAGING_ENVIRONMENT_AWS_ACCESS_KEY_ID",
              "AWS_ACCESS_KEY_ID_1098"
            ]
          }
        },
        "aws_secrets_manager": {
          "description": "Automatically tries multiple secret name patterns",
          "patterns": [
            "inventag/credentials/{account_id}",
            "inventag/credentials/{account_name_sanitized}",
            "inventag/{account_id}/credentials",
            "inventag-{account_id}",
            "Environment variable: INVENTAG_SECRET_{ACCOUNT_NAME_SANITIZED}"
          ],
          "examples": {
            "account_123456789012": [
              "inventag/credentials/123456789012",
              "inventag/credentials/production-account",
              "inventag/123456789012/credentials",
              "inventag-123456789012",
              "INVENTAG_SECRET_PRODUCTION_ACCOUNT (env var)"
            ],
            "account_987654321098": [
              "inventag/credentials/987654321098",
              "inventag/credentials/my-custom-staging-environment",
              "inventag/987654321098/credentials",
              "inventag-987654321098",
              "INVENTAG_SECRET_MY_CUSTOM_STAGING_ENVIRONMENT (env var)"
            ]
          }
        }
      },
      "environment_variable_overrides": {
        "description": "You can override secret names using environment variables",
        "examples": {
          "INVENTAG_SECRET_PRODUCTION_ACCOUNT": "my-custom-prod-secret",
          "INVENTAG_SECRET_MY_CUSTOM_STAGING_ENVIRONMENT": "staging-creds-v2",
          "INVENTAG_SECRET_DEVELOPMENT_TEST_ACCOUNT": "dev-test-credentials"
        }
      }
    },
    "usage_examples": {
      "github_actions": {
        "description": "Set up GitHub Secrets using any of the supported patterns",
        "secrets_to_create": [
          "AWS_ACCESS_KEY_ID_123456789012 / AWS_SECRET_ACCESS_KEY_123456789012",
          "AWS_ACCESS_KEY_ID_987654321098 / AWS_SECRET_ACCESS_KEY_987654321098",
          "AWS_ACCESS_KEY_ID_555666777888 / AWS_SECRET_ACCESS_KEY_555666777888",
          "AWS_ACCESS_KEY_ID_111222333444 / AWS_SECRET_ACCESS_KEY_111222333444"
        ]
      },
      "aws_secrets_manager": {
        "description": "Create secrets using any of the supported patterns",
        "secrets_to_create": [
          "inventag/credentials/123456789012",
          "inventag/credentials/987654321098", 
          "inventag/credentials/555666777888",
          "inventag/credentials/111222333444"
        ]
      },
      "local_development": {
        "description": "Use AWS CLI profiles or environment variables",
        "options": [
          "Set global AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY",
          "Configure AWS CLI profiles for each account",
          "Use the accounts_local_with_credentials.json format with direct credentials"
        ]
      }
    },
    "security_notes": [
      "✅ No hardcoded account IDs or mappings in the code",
      "✅ Flexible naming patterns work with any account structure",
      "✅ Environment variable overrides for custom secret names",
      "✅ Automatic fallback to multiple naming conventions",
      "✅ Clear logging of which credentials were found and used",
      "✅ Graceful handling when credentials are not found"
    ]
  }
}